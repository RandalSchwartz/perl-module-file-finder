## -*- cperl -*-

## update _run from the article (which did it better)

## and vice versa... reference the article from the See Also

## in _run, stat($_) if stat(_) is wrong

package File::Finder::Steps;
sub contains {
  my $self = shift;
  my $pat = shift;
  return sub {
    open my $f, "<$_" or return 0;
    while (<$f>) {
      return 1 if /$pat/;
    }
    return 0;
  };
}

# ->contains(qr/mypattern/)

use File::Finder qw(contains foo bar);
# pulls in File::Finder::Plugin::contains etc

## from ovid:
my %status = (
	      links => sub { (stat(_))[3] },
	      inum => sub { (stat(_))[1] },
	      atime => sub { int(-A _) },
	      mtime => sub { int(-M _) },
	      ctime => sub { int(-C _) },
	     );
while (my ($function,$op) = each %status) {
  no strict 'refs';
  *$function = sub {
    my $self = shift;
    my ($prefix, $n) = shift =~ qr/^(\+|-|)(.*)/;
    return sub {
      _n($prefix, $n, $op->());
    };
  }
} 

